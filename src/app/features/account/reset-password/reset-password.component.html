<div class="grid grid-cols-12 overflow-auto sm:h-screen">

  <!-- âœ… Aside image branding -->
  <app-aside-image class="relative hidden bg-[#FFE9D1] lg:col-span-7 lg:block xl:col-span-8 2xl:col-span-9 dark:bg-[#14181c]"></app-aside-image>

  <!-- âœ… Main form container -->
  <div class="col-span-12 lg:col-span-5 xl:col-span-4 2xl:col-span-3">
    <div class="flex flex-col items-stretch p-8 lg:p-16">

      <!-- Branding/logo -->
      <div class="flex items-center justify-between">
        <a routerLink="/">
          <div class="mx-4 flex items-center gap-2 font-black">
            <div class="mask mask-hexagon font-train bg-primary text-white p-3">T</div>
              <span class="font-train text-3xl">TURA</span>
          </div>
        </a>
      </div>

      <!-- Title -->
      <h1 class="mt-8 text-center text-2xl font-semibold md:mt-12 lg:mt-24">
        {{ 'PASSWORD.RESET' | translate }}
      </h1>

      <!-- ðŸ“© Section Email connue -->
      <section *ngIf="myEmail()" class="mt-6 md:mt-10">

        <p class="text-center text-base-content/80 text-sm mb-4">
          {{ 'LOGIN.REGISTERED_EMAIL' | translate }}:
          <span class="font-semibold">{{ myEmail() }}</span>
        </p>

        <form [formGroup]="userForm" (ngSubmit)="onSubmitForm()" class="space-y-6">

          <fieldset class="fieldset">
            <label class="fieldset-legend">{{ 'PASSWORD.PASSWORD_NEW' | translate }}</label>

            <label class="input w-full items-center gap-3">
              <span-lucide [img]="KeyRoundIcon" class="text-base-content/80 size-5" />

              <input
                [type]="pwdHidden ? 'password' : 'text'"
                class="grow focus:outline-0"
                placeholder="Password"
                formControlName="password"
                autocomplete="off"
              />

              <label class="swap btn btn-xs btn-ghost btn-circle text-base-content/60">
                <input
                  type="checkbox"
                  aria-label="Show password"
                  (click)="showPwd()"
                />
                <span-lucide *ngIf="pwdHidden" [img]="EyeIcon" class="size-4" />
                <span-lucide *ngIf="!pwdHidden" [img]="EyeOffIcon" class="size-4" />
              </label>
            </label>

            <!-- Gestion des erreurs -->
            <div class="text-error text-sm mt-1" *ngIf="password?.errors?.['required'] && password?.touched">
              {{ 'ERROR.PASSWORD_REQUIRED' | translate }}
            </div>
            <div class="text-error text-sm mt-1" *ngIf="password?.errors?.['message'] && password?.touched">
              {{ password?.errors?.['message'] }}
            </div>
          </fieldset>


          <!-- âœ… Submit button -->
          <div class="text-center">
            <button type="submit" class="btn btn-primary w-full" [disabled]="isClicked()">
              {{ 'GLOBAL.CONFIRM' | translate }}
            </button>
          </div>
        </form>

        <!-- â„¹ï¸ Footer info -->
        <div class="mt-6 text-center text-sm text-base-content/60">
          {{ 'REGISTER.SPAM' | translate }}<br />
          {{ 'ERROR.NOT_RECEIVED' | translate }} â€“ {{ 'ERROR.CONTACT_SUPPORT' | translate }}<br />
          <a href="mailto:info@turaracing.com" class="link link-primary">info&#64;turaracing.com</a>
        </div>
      </section>

      <!-- âŒ Lien invalide ou erreur -->
      <section class="text-center mt-10 space-y-4" *ngIf="myCode() === 'none' || isError()">
        <h2 class="text-2xl text-error font-semibold flex items-center justify-center gap-2">
          <span-lucide [img]="CircleXIcon" class="size-6" />
          Oops...
        </h2>
        <p class="text-base-content/80">{{ 'ERROR.INVALID_LINK' | translate }}</p>
        <a [routerLink]="['/account/forgot-password']" class="btn btn-primary">
          {{ 'PASSWORD.FORGOT' | translate }}
        </a>
      </section>
    </div>
  </div>
</div>
