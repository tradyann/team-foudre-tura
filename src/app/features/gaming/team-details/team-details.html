<div class="p-4">
    @if (loading()) {
        <!-- Skeleton loading -->
        <div class="flex gap-4">
            <div class="skeleton h-24 w-24 rounded"></div>
            <div class="flex-1 space-y-3">
                <div class="skeleton h-6 w-1/3"></div>
                <div class="skeleton h-4 w-1/2"></div>
                <div class="skeleton h-4 w-2/3"></div>
            </div>
        </div>
    } @else if (error()) {
        <div role="alert" class="alert alert-soft alert-error">
            <span>{{ error() }}</span>
        </div>
    } @else {


        <h2 class="text-xl font-bold mb-3">
            {{result()?.teamName}}
            <span class="text-sm text-gray-500 ml-2">({{ result()?.teamCode }})</span>

            @if (result()?.flag) {
                <img
                class="inline-block h-4 w-6 ml-1"
                [src]="'assets/flags/4x3/' + result()?.flag + '.svg'"
                [attr.alt]="result()?.flag + ' flag'"
                />
            }
        </h2>

        @if (!result()?.hasTeam) {
            <button class="btn btn-primary my-3" (click)="onJoin()">Join Team</button>
        }

        <div class="overflow-x-auto">
            <table class="table table-sm">
                <thead>
                    <tr class="bg-base-200">
                        <th>NAME</th>
                        <th>TYPE</th>
                        <th class="text-right">SCORE</th>
                    </tr>
                </thead>
                <tbody>
                    @for (m of result()?.members; track m.zwiftId) {
                        <tr>
                            <td class="flex items-center gap-2">
                                @if (m.flag) {
                                    <img
                                    class="inline-block h-4 w-6 ml-1"
                                    [src]="'assets/flags/4x3/' + m.flag + '.svg'"
                                    [attr.alt]="m.flag + ' flag'"
                                    />
                                }
                                <span 
                                    class="hover:underline hover:text-primary cursor-pointer"
                                    [routerLink]="['/game/rider-details', m.idClient]"
                                    [innerHtml]=m.racerName>
                                </span>
                            </td>
                            <td>{{ m.phenotype ?? '-' }}</td>
                            <td class="text-right font-medium">{{ m.scoring }}</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>
